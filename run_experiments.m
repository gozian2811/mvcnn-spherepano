% function run_experiments()

setup;

%% modelnet experiments (w/ upright assumption)
get_imdb('ModelNet40Sv20rgr', ...
  'func', @(s) setup_imdb_modelnet(s,'useUprightAssumption',true), ...
  'rebuild', false);

% phase 1 -- regular 
%{
cnn_shape('Modelnet40v12', ...
  'numFetchThreads', 12, ...
  'pad', 32, ...
  'border', 32, ...
  'multiview', false, ...
  'batchSize', 60, ...
  'gpus', [], ...
  'maxIterPerEpoch', Inf, ...
  'numEpochs', [0 0 30], ...
  'learningRate', [0.00005*ones(1,10) 0.000001*ones(1,10) 0.00000001*ones(1,5) 0.000000001*ones(1,5)] ...
);
%}
% phase 2 -- mvcnn
cnn_shape('ModelNet40Sv20rgr', ...
  'numFetchThreads', 12, ...
  'pad', 32, ...
  'border', 32, ...
  'baseModel', fullfile('data','models','net-fit.mat'), ...
  'multiview', true, ...
  'viewpoolPos', 'relu6', ...
  'batchSize', 5, ...
  'gpus', [], ...
  'maxIterPerEpoch', Inf, ...
  'numEpochs', [10 5 40], ...
  'learningRate', [0.0005*ones(1,10) 0.0001*ones(1,5) 0.00001*ones(1,15) 0.000001*ones(1,5) 0.0000001*ones(1,5) 0.00000001*ones(1,5) 0.000000001*ones(1,10)] ...
);

%{
cnn_shape('Modelnet40Sv12', ...
  'numFetchThreads', 12, ...
  'pad', 32, ...
  'border', 32, ...
  'baseModel', fullfile('data','models','net-fit.mat'), ...
  'multiview', true, ...
  'viewpoolPos', 'relu6', ...
  'batchSize', 5, ...
  'gpus', [], ...
  'maxIterPerEpoch', Inf, ...
  'numEpochs', [0 15 15], ...
  'learningRate', [0.005*ones(1,5) 0.001*ones(1,5) 0.0001*ones(1,10) 0.00001*ones(1,10)] ...
);  
%}
